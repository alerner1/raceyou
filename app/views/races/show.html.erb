
<h1>Race details:</h1>
<ul>
  <li>Type: <%= @race.race_type %></li>
  <li>Length: <%= @race.length %></li>
  <li>Elevation increase: <%= @race.elevation_increase %></li>
  <li>Elevation decrease: <%= @race.elevation_decrease %></li>
  <li>Expires: <%= @race.expiration_date %></li>
</ul>

<h3>Runners signed up for this race:</h3>
<ul>
  <% @race.runners.each do |runner| %>
    <li><%= link_to runner.name, runner_path(runner) %></li>
  <% end %>
</ul> 

<% if !@current_user.races.include?(@race) %>
  <%= button_to "Sign up for this race", registrations_path, method: :post, params: { :registration => {:race_id => @race.id, :runner_id => session[:runner_id] } }%>
<% else %>
  <%= button_to "Back out of this race", registration_path(@current_user.registrations.find_by(race_id: @race.id)), {method: :delete, data: {confirm: "Are you sure you want to back out of this race?"}} %>
<% end %>

<% if flash[:success] %>
  <h1><%= flash[:success] %></h1>
<% end %>

<% if @race.closed == false %>
  <%= button_to "Close race", race_path(@race), method: :patch, params: { :race => { :closed => true } }%>
<% else %>
  This race is closed. <br>
<% end %>

<%= button_to "Delete Race", race_path(@race), {method: :delete, data: {confirm: "Are you sure you want to delete this race?"}} %>
